(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff8c882a"],{"38ef":function(e,t,i){"use strict";i("803f")},"555a":function(e,t,i){e.exports=i.p+"img/icon.7c7ba4b0.png"},"6e7b":function(e,t,i){},"803f":function(e,t,i){},d504:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("play"),i("el-aside",{staticStyle:{width:"250px"}},[i("Nav")],1),i("el-container",[i("el-main",[i("router-view")],1)],1)],1)},a=[],n=i("5530"),o=i("2f62"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Nav_meut"},[s("el-col",[s("div",{staticClass:"icon",staticStyle:{"margin-bottom":"10px"}},[s("img",{attrs:{src:i("555a"),height:"60"}}),s("span",[e._v("小破盘")])]),s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"/drive/file","background-color":"#F6F6F6",router:!0}},e._l(e.routers,(function(t,i){return s("el-menu-item",{key:i,attrs:{index:t.path}},[s("template",{slot:"title"}),s("i",{class:t.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])],2)})),1)],1),s("div",{staticClass:"footer"},[s("div",{staticClass:"content"},[s("span",[e._v(" "+e._s(e._f("getBToMB")(e.userInfo.drive_used))+" MB/"+e._s(e._f("getBToGB")(e.userInfo.drive_size))+"GB")]),isNaN(e.percentage)?e._e():s("el-progress",{staticClass:"jindutiao",attrs:{percentage:100*e.percentage,color:e.customColor,format:e.format}})],1),s("div",{staticClass:"user_info"},[s("div",{staticClass:"head"},[s("img",{attrs:{src:e.userInfo.headImg,alt:""}})]),s("div",{staticClass:"nicheng"},[s("span",[e._v(e._s(e.userInfo.nickname))])]),s("div",{staticClass:"set"},[s("el-popover",{staticClass:"popover",attrs:{placement:"top",trigger:"click"}},[s("i",{staticClass:"iconfont el-icon-setting",attrs:{slot:"reference"},slot:"reference"}),s("ul",{staticClass:"menu"},[s("li",{on:{click:e.handel}},[e._v("更换头像")]),s("input",{ref:"fileEle",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.uploadFile}}),s("li",{on:{click:e.modify_nick}},[e._v("修改昵称")]),s("li",{on:{click:e.openModfityPass}},[e._v("修改密码")]),s("li",[e._v("关于")]),s("li",{on:{click:e.loginOut}},[e._v("退出登录")])])])],1)])]),s("div",{staticClass:"nickname"},[s("el-dialog",{attrs:{title:"修改昵称",visible:e.nickNameDialog,width:"30%",center:""},on:{"update:visible":function(t){e.nickNameDialog=t}}},[s("el-input",{attrs:{placeholder:"请输入新的昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.nickNameDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.updateNick}},[e._v("确 定")])],1)],1)],1),s("div",{staticClass:"modfityPass"},[s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"modifyPass",attrs:{model:e.modify,rules:e.rules}},[s("el-form-item",{attrs:{label:"原密码","label-width":"120px",prop:"oldPass"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入原密码"},model:{value:e.modify.oldPass,callback:function(t){e.$set(e.modify,"oldPass",t)},expression:"modify.oldPass"}})],1),s("el-form-item",{attrs:{label:"新密码","label-width":"120px",prop:"oldPass"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.modify.newPass,callback:function(t){e.$set(e.modify,"newPass",t)},expression:"modify.newPass"}})],1),s("el-form-item",{attrs:{label:"确认密码","label-width":"120px",prop:"oldPass"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请再次输入新密码"},model:{value:e.modify.conPass,callback:function(t){e.$set(e.modify,"conPass",t)},expression:"modify.conPass"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updataPass("modifyPass")}}},[e._v("确 定")])],1)],1)],1)],1)},r=[],c=i("1da1"),u=(i("96cf"),i("caad"),i("2532"),i("b0c0"),i("ac1f"),i("5319"),i("2612")),d=i("3f5e"),f=i("f65e"),m={data:function(){return{isCollapse:!0,routers:[{path:"/drive/file",name:"文件",icon:"el-icon-files"},{path:"/drive/album",name:"照片",icon:"el-icon-picture-outline"},{path:"/drive/Favorite",name:"收藏夹",icon:"el-icon-star-off"}],nickNameDialog:!1,dialogFormVisible:!1,modify:{newPass:null,conPass:null,oldPass:null},nickname:null,customColor:"",rules:{oldPass:[{required:!0,message:"密码是必须的",trigger:"blur"},{min:8,max:14,message:"长度不对哦！长度应在8-14之间",trigger:"blur"}]}}},computed:Object(n["a"])({percentage:function(){var e=this.userInfo,t=e.drive_used,i=e.drive_size,s=parseInt(t/i*100)/100;return this.percentageStatua(s),s>1?1:s}},Object(o["d"])("user",["userInfo"])),filters:{getBToMB:function(e){return parseInt(e/1024/1024)},getBToGB:function(e){return parseInt(e/1024/1024/1024)}},methods:{percentageStatua:function(e){this.customColor=e<.6?"#409EFF":e>=.6&&e<.8?"#E6A23C":"#F56C6C"},format:function(e){return"".concat(e,"%")},handel:function(){this.$refs.fileEle.click()},uploadFile:function(e){var t=this,i=e.target.files[0];if(!i)return!1;if(i.size>5242880)return this.$message.warning("仅支持5M以内图片");if(!i.type.includes("image"))return this.$message.warning("仅支持image/*图片");var s=i.name,a=new FileReader,n=this.userInfo.drive_id;a.onload=Object(c["a"])(regeneratorRuntime.mark((function e(){var i,o,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["p"])({chunk:a.result,filename:s,drive_id:n});case 2:i=e.sent,o=i.head_img_url,l=i.message,r=i.status,200==r&&(t.$message({type:"success",message:l}),t.userInfo.headImg=o);case 7:case"end":return e.stop()}}),e)}))),a.readAsDataURL(i)},modify_nick:function(){this.nickNameDialog=!this.nickNameDialog,this.nickname=this.userInfo.nickname},updateNick:function(){var e=this;Object(u["b"])({drive_id:this.userInfo.drive_id,nickname:this.nickname}).then((function(t){var i=t.status,s=t.message;200==i?(e.$message.success(s),e.userInfo.nickname=e.nickname,e.nickNameDialog=!e.nickNameDialog):e.$message.warning(s)})).catch((function(t){e.$message.warning(t.message)}))},openModfityPass:function(){this.dialogFormVisible=!0},updataPass:function(e){var t=this;this.$refs[e].validate((function(e){if(e&&t.modify.newPass===t.modify.conPass){t.dialogFormVisible=!1;var i=t.userInfo.drive_id;Object(u["c"])({password:Object(f["b"])(t.modify.newPass),drive_id:i}).then((function(e){var i=e.status,s=e.message;200==i?(t.$message.success(s),localStorage.removeItem("token"),t.$router.replace("/login")):t.$message.error(s)}))}}))},loginOut:function(){localStorage.removeItem("token"),this.$router.replace({path:"/login"})}},mounted:function(){}},p=m,v=(i("38ef"),i("2877")),g=Object(v["a"])(p,l,r,!1,null,"166d232e",null),h=g.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"video_play"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:e.video_pause}})]),i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6,offset:3}},[i("span",{staticClass:"video_name"},[e._v(e._s(e.video_name))])])],1),i("el-row",[i("el-col",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.file_type.includes("video"),expression:"file_type.includes('video')"}],staticClass:"view",attrs:{id:"vb"}},[i("NPlayer",{ref:"player",attrs:{options:e.options,set:e.setPlayer}})],1),e.file_type.includes("image")?i("div",{staticClass:"images"},[i("img",{attrs:{src:e.video_src}})]):e._e()])],1)],1)},b=[],y={data:function(){return{file_type:"",video_name:"",options:{src:"",poster:""}}},computed:Object(n["a"])({},Object(o["d"])("file",["isOpen","video_info"])),watch:{video_info:function(){var e=this.video_info,t=e.download_url,i=e.DOMAIN,s=e.file_name,a=e.type,n=e.cover_url;this.options.src=i+"/"+t,this.video_name=s,this.file_type=a,this.options.poster=i+"/"+n,this.$options.player.updateOptions(this.options)}},methods:Object(n["a"])({video_pause:function(){this.SET_IS_OPEN(!1),this.$options.player.pause()},setPlayer:function(e){this.$options.player=e}},Object(o["c"])("file",["SET_IS_OPEN","SET_VIDEO_INFO"])),mounted:function(){}},k=y,w=(i("e96b"),Object(v["a"])(k,_,b,!1,null,"0eeda05c",null)),O=w.exports,P={components:{Nav:h,play:O},computed:Object(n["a"])({},Object(o["d"])("user",["userInfo"])),methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])("user",["getUserInfo"])),Object(o["b"])("file",["getFileTotle"])),watch:{userInfo:function(){this.getFileTotle({drive_id:this.userInfo.drive_id})}},mounted:function(){this.getUserInfo()}},C=P,I=Object(v["a"])(C,s,a,!1,null,null,null);t["default"]=I.exports},e96b:function(e,t,i){"use strict";i("6e7b")}}]);