(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7443593a"],{"0a17":function(e,t,n){"use strict";n("8583")},1276:function(e,t,n){"use strict";var r=n("d784"),i=n("44e7"),a=n("825a"),l=n("1d80"),s=n("4840"),o=n("8aa5"),c=n("50c4"),u=n("577e"),d=n("14c3"),f=n("9263"),p=n("9f7f"),h=n("d039"),m=p.UNSUPPORTED_Y,v=[].push,b=Math.min,g=4294967295,_=!h((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=u(l(this)),a=void 0===n?g:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,a);var s,o,c,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,m=new RegExp(e.source,p+"g");while(s=f.call(m,r)){if(o=m.lastIndex,o>h&&(d.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&v.apply(d,s.slice(1)),c=s[0].length,h=o,d.length>=a))break;m.lastIndex===s.index&&m.lastIndex++}return h===r.length?!c&&m.test("")||d.push(""):d.push(r.slice(h)),d.length>a?d.slice(0,a):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=l(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,i,n):r.call(u(i),t,n)},function(e,i){var l=a(this),f=u(e),p=n(r,l,f,i,r!==t);if(p.done)return p.value;var h=s(l,RegExp),v=l.unicode,_=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"g":"y"),y=new h(m?"^(?:"+l.source+")":l,_),k=void 0===i?g:i>>>0;if(0===k)return[];if(0===f.length)return null===d(y,f)?[f]:[];var w=0,x=0,E=[];while(x<f.length){y.lastIndex=m?0:x;var O,C=d(y,m?f.slice(x):f);if(null===C||(O=b(c(y.lastIndex+(m?x:0)),f.length))===w)x=o(f,x,v);else{if(E.push(f.slice(w,x)),E.length===k)return E;for(var S=1;S<=C.length-1;S++)if(E.push(C[S]),E.length===k)return E;x=w=O}}return E.push(f.slice(w)),E}]}),!_,m)},8583:function(e,t,n){},"9c88":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"File"},[n("el-row",{staticStyle:{margin:"20px 0 20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("input",{ref:"fileEle",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.upload}}),n("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.$refs.fileEle.click()}}},[n("i",{staticClass:"el-icon-upload el-icon--left"}),e._v("上传")]),n("el-popover",{staticClass:"popover",attrs:{placement:"top",trigger:"click"}},[n("el-button",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("新建")]),n("ul",{staticClass:"menu"},[n("li",{on:{click:function(t){e.centerDialogVisible=!0}}},[n("i",{staticClass:"el-icon-folder-add el-icon--left"}),e._v("新建文件夹 ")]),n("li",[n("i",{staticClass:"el-icon-document-add el-icon--left"}),e._v("新建文件")])])],1),n("el-button",{staticStyle:{"margin-left":"15px"}},[n("i",{staticClass:"el-icon-finished el-icon--left"}),e._v("全选")])],1),n("el-col",{attrs:{span:3,offset:6}},[n("el-input",{attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchFile.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}})],1)],1),n("div",{staticClass:"breadcrumb"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.routers,(function(t,r){return n("el-breadcrumb-item",{key:r},[n("span",{staticClass:"nav_link",on:{click:function(n){return e.goBack(t,r)}}},[e._v(e._s(t.file_name))])])})),1)],1),n("div",{staticClass:"fileList"},[n("Folder",{ref:"folder",attrs:{searchFileItem:e.searchFileItem}})],1),n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.footerMenuShow,expression:"footerMenuShow"}],staticClass:"footerMenu",on:{click:function(t){e.footerMenuShow=!e.footerMenuShow}}},[n("div",{staticClass:"footItem"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-download"}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"收藏",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-star-off"}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"转发",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-share"}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-delete"}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"更多",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-more"}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消选择",placement:"top-start"}},[n("el-button",{attrs:{icon:"el-icon-circle-close"}})],1)],1)])]),n("div",{staticClass:"mkdir"},[n("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[n("el-input",{attrs:{placeholder:"请输入文件夹名"},model:{value:e.dirParams.dir_name,callback:function(t){e.$set(e.dirParams,"dir_name",t)},expression:"dirParams.dir_name"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.mkdir_btn}},[e._v("确 定")])],1)],1)],1),n("transition",{attrs:{name:"slide-to-right"}},[e.upload_Ele?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"upload_file_state"},[n("el-card",{staticClass:"box-card"},[n("span",[e._v("上传进度：")]),e._l(1,(function(t){return n("div",{key:t,staticClass:"item"},[n("span",{staticClass:"file_name"},[e._v(e._s(e.upload_name))]),isNaN(e.percentage)?e._e():n("el-progress",{staticStyle:{width:"280px",display:"inline-block","margin-left":"10px"},attrs:{percentage:e.percentage}})],1)})),n("p",[e._v("tip：上传过程中不要离开此页面")])],2)],1):e._e()])],1)},i=[];function a(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function l(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0)if(a.push(r.value),t&&a.length===t)break}catch(o){s=!0,i=o}finally{try{l||null==n["return"]||n["return"]()}finally{if(s)throw i}}return a}}n("fb6a"),n("b0c0"),n("a630");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return a(e)||l(e,t)||o(e,t)||c()}var d=n("1da1"),f=n("5530"),p=(n("96cf"),n("ac1f"),n("1276"),n("99af"),n("3f5e")),h=n("25a9"),m=n("f65e"),v=n("bbfb"),b=n("2f62"),g={data:function(){return{checked:null,searchWord:null,checkAll:!1,fileList:[],isIndeterminate:!0,menuShow:!1,footerMenuShow:!1,menuEle:null,arryCheck:[],clickIndex:null,centerDialogVisible:!1,dirParams:{dir_name:"新建文件夹",type:"folder"},chunkSize:1048576,partList:[],total:0,index:0,upload_name:"",upload_Ele:!1,percentage:0,loading:!1,searchFileItem:[]}},watch:{arryCheck:{handler:function(e,t){console.log(e,t)}}},components:{Folder:v["default"]},computed:Object(f["a"])(Object(f["a"])({},Object(b["d"])("user",["userInfo"])),Object(b["d"])("file",["routers","parent_file_id"])),methods:Object(f["a"])(Object(f["a"])({upload:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,i,a,l,s,o,c,d,f,p,h,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.userInfo,i=r.drive_used,a=r.drive_size,!(i>=a)){n.next=3;break}return n.abrupt("return",t.$message.error("当前账户可用空间不足"));case 3:if(l=e.target.files[0],l){n.next=6;break}return n.abrupt("return");case 6:t.upload_name=l.name,s=0;case 8:if(!(s<=l.size)){n.next=20;break}if(s=t.total*t.chunkSize,o=l.name.split("."),c=u(o,2),d=c[0],f=c[1],p=l.slice(s,s+t.chunkSize),h="".concat(d,".").concat(t.total,".").concat(f),m=new File([p],h),t.partList.push(m),t.total+=1,!(s>=l.size)){n.next=18;break}return n.abrupt("break",20);case 18:n.next=8;break;case 20:t.sendRequest(e);case 21:case"end":return n.stop()}}),n)})))()},progressPerce:function(e){var t=parseInt(e/this.total*100);this.percentage=100==t?99:t},sendRequest:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,i,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.upload_Ele=!0,t.index=0,r=t.partList,i=r.length,a=0;case 4:if(!(a<i)){n.next=14;break}return l=new FormData,l.append("file",r.shift()),n.next=9,Object(p["n"])(l);case 9:t.index++,t.progressPerce(t.index);case 11:a++,n.next=4;break;case 14:setTimeout((function(){t.mergeFile(e)}),4e3);case 15:case"end":return n.stop()}}),n)})))()},mergeFile:function(e){var t=this,n=e.target.files[0],r=n.name,i=Object(m["a"])(r),a=n.size,l=n.type,s=Object(h["a"])("YYYY-MM-DD hh:mm:ss"),o=this.userInfo.drive_id,c=this.parent_file_id;Object(p["i"])({drive_id:o,file_id:i,file_name:r,parent_file_id:c,file_size:a,file_type:l,created_at:s,updated_at:s}).then(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserDrive();case 2:t.$refs.folder.getUserFile(),t.$message.success(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.upload_Ele=!1,this.total=0,this.index=0,this.percentage=0},mkdir_btn:function(){var e=this,t=this.userInfo.drive_id,n=Object(h["a"])("YYYY-MM-DD hh:mm:ss"),r=this.dirParams,i=r.dir_name,a=r.type,l=this.parent_file_id,s=Object(m["a"])(l+i);Object(p["j"])({drive_id:t,parent_file_id:l,file_id:s,filename:i,type:a,created_at:n,updated_at:n}).then((function(){e.$refs.folder.getUserFile()})),this.centerDialogVisible=!1},download_url:function(){var e=this.fileList[this.clickIndex],t=e.download_url,n=e.name;console.log(t,n);var r=document.createElement("a");r.download=n,r.style.display="none",r.href=t,document.body.appendChild(r),r.click(),console.log(r),document.body.removeChild(r)},searchFile:function(){var e=this;this.SET_ROUTER({name:"".concat(this.searchWord,"的搜索结果"),path:Date.now()}),Object(p["g"])({searchWord:this.searchWord,drive_id:this.userInfo.drive_id}).then((function(t){e.searchWord="",e.searchFileItem=t.data}))},goBack:function(e,t){this.SET_PARENT_FILE_ID(e.path),this.REMOVE_ROUTER(t+1),this.$refs.folder.getUserFile()}},Object(b["c"])("file",["REMOVE_ROUTER","SET_PARENT_FILE_ID","SET_FAVORITE","SET_ROUTER"])),Object(b["b"])("user",["getUserDrive"])),created:function(){this.SET_FAVORITE("file")},mounted:function(){this.menuEle=this.$refs.fileMenu}},_=g,y=(n("0a17"),n("2877")),k=Object(y["a"])(_,r,i,!1,null,"7a4df08d",null);t["default"]=k.exports},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),l=!a((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:l},{from:i})},d28b:function(e,t,n){var r=n("746f");r("iterator")},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),a=n("da84"),l=n("5135"),s=n("861d"),o=n("9bf2").f,c=n("e893"),u=a.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(f,u);var p=f.prototype=u.prototype;p.constructor=f;var h=p.toString,m="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;o(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(l(d,e))return"";var n=m?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}}}]);